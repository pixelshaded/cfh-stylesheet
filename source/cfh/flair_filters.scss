/*
  Flair Filters

  For each filter you want to add, you will need to pick a two letter language code. This should not be a real one. Q is a good place to start, i.e. qa, qb, qc, qd, etc because no language code starts with q.
  We use reddit's localization system to implement the filter. When you go to qa.reddit.com for instance, that adds the qa language code the html tag like so <html lang="qa">. From this,
  you can target your filter's css class using `html:lang(qa) .linkflair-classname`. You can target multiple filters by adding another entry with the same language code but a different filter class.

  Adding Filter to Sidebar Menu

  To add this filter to the sidebar menu, you just add a new list item link to the subreddit with your new lang code as the subdomain: https://qa.reddit.com/r/SubRedditName in the first blockquote of the content.

  Highlighting Selected Filter in Sidebar Menu

  You just need to figure out where the menu item is located. So if its 1, 1 - aka the first item in main menu, then first item in submenu -
  you can target that with css like so: html:lang(qa) .side .md > blockquote:first-child ul li:nth-child(1) ul li:nth-child(1)

  Use the createFlairFilter mixin to create all the necessary classes for each filter
*/

@mixin createFlairFilter($langCode, $mainMenuItemNum, $subMenuItemNum, $isFilterOut, $flairClasses) {
  html:lang(#{$langCode}) .side .md > blockquote:first-child ul > li:nth-child(#{$mainMenuItemNum}) > ul > li:nth-child(#{$subMenuItemNum}) {
    background-size: 16px 16px;
    background-image: url(%%all-guard%%);
    background-repeat: no-repeat;
    background-position: 10px 6px;
  }
  html:lang(#{$langCode}) .side .md > blockquote:first-child ul > li:nth-child(#{$mainMenuItemNum}) > ul > li:nth-child(#{$subMenuItemNum}) * {
    margin-left: 25px; /* so the text can create space for the all guard background image */
  }

  @if $isFilterOut {
    @each $flairClass in $flairClasses {
      html:lang(#{$langCode}) .linkflair-#{$flairClass} {
        display: none !important;
      }
    }
  } @else {
    html:lang(#{$langCode}) .thing.link {
      display: none !important;
    }
    @each $flairClass in $flairClasses {
      html:lang(#{$langCode}) .linkflair.linkflair-#{$flairClass} {
        display: block !important;
      }
    }
  }
}

@include createFlairFilter(en, 1, 1, true, none);
@include createFlairFilter(nm, 1, 1, true, none);
@include createFlairFilter(qa, 1, 2, true, rework);
@include createFlairFilter(qb, 1, 3, false, tips-tricks video-guide punish-combo);
@include createFlairFilter(qc, 1, 4, false, discussion rework);
@include createFlairFilter(qd, 1, 5, false, psa moderator-post tournament);

@mixin createFlairColor($color, $bgColor, $flairClass) {
  .linkflair-#{$flairClass} .linkflairlabel, .flair-#{$flairClass}[title] {
    background: $bgColor;
    border: 1px solid $bgColor;
    color: $color;
  }
}

$blue: #5e82a6;
$red: #c45b52;
$yellow: #fde025;
$orange: #ff9f4f;
$teal: #55c3c0;
$pink: #fc8cf2;
$purple: #8362b4;
$green: #62b46d;

@include createFlairColor(#fff, $blue, "blue");
@include createFlairColor(#fff, $blue, "discussion");
@include createFlairColor(#fff, $red, "red");
@include createFlairColor(#fff, $red, "rework");
@include createFlairColor(#000, $yellow, "yellow");
@include createFlairColor(#000, $yellow, "punish-combo");
@include createFlairColor(#fff, $orange, "orange");
@include createFlairColor(#fff, $orange, "psa");
@include createFlairColor(#fff, $teal, "teal");
@include createFlairColor(#fff, $teal, "tournament");
@include createFlairColor(#fff, $pink, "pink");
@include createFlairColor(#fff, $pink, "video-guide");
@include createFlairColor(#fff, $purple, "purple");
@include createFlairColor(#fff, $purple, "tips-tricks");
@include createFlairColor(#fff, $green, "green");
@include createFlairColor(#fff, $green, "moderator-post");
